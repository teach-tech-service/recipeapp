{"version":3,"sources":["../../src/config/db.js"],"names":["URI","mongoose","connect","useNewUrlParser","err","Error","console","log","RecipeModel","deleteMany","then","fs","readFile","path","join","__dirname","data","recipes","JSON","parse","i","length","date","Date","setDate","getDate","createdAt","insertMany"],"mappings":";;;;;;;AAAA;;AACA;;AACA;;AACA;;;;eAEe,kBAAAA,GAAG,EAAI;AACpBC,uBAASC,OAAT,CAAiBF,GAAjB,EAAsB;AAAEG,IAAAA,eAAe,EAAE;AAAnB,GAAtB,EAAiD,UAAAC,GAAG,EAAI;AACtD,QAAIA,GAAJ,EAAS;AACP,YAAM,IAAIC,KAAJ,iDAAmDD,GAAnD,EAAN;AACD;;AACDE,IAAAA,OAAO,CAACC,GAAR,wCAA4CP,GAA5C;;AAEAQ,uBAAYC,UAAZ,CAAuB,EAAvB,EAA2BC,IAA3B,CAAgC,YAAM;AACpCC,qBAAGC,QAAH,CAAYC,iBAAKC,IAAL,CAAUC,SAAV,EAAqB,sBAArB,CAAZ,EAA0D,UAACX,GAAD,EAAMY,IAAN,EAAe;AACvE,YAAIZ,GAAJ,EAAS;AACPE,UAAAA,OAAO,CAACC,GAAR;AAGD;;AACD,YAAMU,OAAO,GAAGC,IAAI,CAACC,KAAL,CAAWH,IAAX,CAAhB;;AACA,aAAK,IAAII,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGH,OAAO,CAACI,MAA5B,EAAoCD,CAAC,EAArC,EAAyC;AACvC,cAAIE,KAAI,GAAG,IAAIC,IAAJ,EAAX;;AACAD,UAAAA,KAAI,CAACE,OAAL,CAAaF,KAAI,CAACG,OAAL,KAAiBL,CAA9B;;AACAH,UAAAA,OAAO,CAACG,CAAD,CAAP,CAAWM,SAAX,GAAuBJ,KAAvB;AACD;;AACD,YAAIA,IAAI,GAAG,IAAIC,IAAJ,EAAX;AACAD,QAAAA,IAAI,CAACE,OAAL,CAAaF,IAAI,CAACG,OAAL,KAAiB,CAA9B;AACAR,QAAAA,OAAO,CAAC,CAAD,CAAP,CAAWS,SAAX,GAAuBJ,IAAvB;AACAL,QAAAA,OAAO,CAAC,CAAD,CAAP,CAAWS,SAAX,GAAuBJ,IAAvB;;AACAd,2BAAYmB,UAAZ,CAAuBV,OAAvB;AACD,OAjBD;AAkBD,KAnBD;AAoBD,GA1BD;AA2BD,C","sourcesContent":["import mongoose from \"mongoose\";\nimport RecipeModel from \"../models/recipe\";\nimport fs from \"fs\";\nimport path from \"path\";\n\nexport default URI => {\n  mongoose.connect(URI, { useNewUrlParser: true }, err => {\n    if (err) {\n      throw new Error(`Error while trying to connect MongoDB ${err}`);\n    }\n    console.log(`Connected to MongoDB on port ${URI}`);\n\n    RecipeModel.deleteMany({}).then(() => {\n      fs.readFile(path.join(__dirname, \"../data/recipes.json\"), (err, data) => {\n        if (err) {\n          console.log(\n            `[MONGODB] Problem with recipes load mock data from file`\n          );\n        }\n        const recipes = JSON.parse(data);\n        for (let i = 0; i < recipes.length; i++) {\n          let date = new Date();\n          date.setDate(date.getDate() - i);\n          recipes[i].createdAt = date;\n        }\n        let date = new Date();\n        date.setDate(date.getDate() - 5);\n        recipes[1].createdAt = date;\n        recipes[2].createdAt = date;\n        RecipeModel.insertMany(recipes);\n      });\n    });\n  });\n};\n"],"file":"db.js"}